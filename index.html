
<!doctype html>
<!--[if IE 7]>    <html class="no-js lt-ie10 lt-ie9 lt-ie8 ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie10 lt-ie9 ie8" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js lt-ie10 ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
    <head>
        <!-- Avoid script blocking -->
        <script></script>
        <meta charset="utf-8">
        <meta http-equiv="content-language" content="es"/>
        <meta name="author" content=""/>
        <meta name="description" content=""/>

<style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
        <title>Prueba</title>

        <!-- Responsiveness -->
        <meta name="HandheldFriendly" content="True" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta http-equiv="cleartype" content="on" />
     
        <!-- Icons -->
        <link rel="shortcut icon" href="" />


        <!-- Open Graph -->
        <meta property="og:title" content=" "/>
        <meta property="og:type" content="website"/>
        <meta property="og:url" content=""/>
        <meta property="og:image" content=""/>
        <meta property="og:site_name" content=""/>
        <meta property="og:description" content="" />
        <meta property="fb:app_id" content=""/>

        <!-- Stylesheets -->
        <link rel=stylesheet href="css/reset.css"/>
        <link rel=stylesheet href="css/styles.css"/>
        <link href='http://fonts.googleapis.com/css?family=News+Cycle:400,700' rel='stylesheet' type='text/css'>



        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
        <script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false"> </script>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

        <script>
var markers = [];
var markersDist = [];
var pos;
var directionsDisplay;
            function getLocation() {

                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition,showError);
                }
                else {
                    alert("No se pudo golocalizar, revisar si la geolocalizacion esta prendida");
                }
            }

            function showPosition(position) {
			pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

 var infowindow = new google.maps.Marker({
                map: map,
                position: pos,
                title: 'Usted está aquí'
              });
              map.setCenter(pos);
			  var urlbase = "http://maps.googleapis.com/maps/api/geocode/json?latlng=";
                var uri = position.coords.latitude+","+position.coords.longitude+"&sensor=false";
                $.ajax({
                    type: 'GET',
                    async:false,
                    dataType: 'json',
                    url: urlbase+uri,
                    success: function(data) {

                        var direction = data.results[0]. formatted_address

                        $("#coordinates").html(direction);
                    }
                });
            }
            function showError(error) {
                    alert("No se pudo golocalizar, revisar si la geolocalizacion esta prendida - ShowError");
					}
        var map;
        function initialize() {
			getLocation();
			  var mapOptions = {
				zoom: 15,
				center: new google.maps.LatLng(position.coords.latitude,showError),
				mapTypeId: google.maps.MapTypeId.ROADMAP
			  };
			  map = new google.maps.Map(document.getElementById('map_canvas'),
				  mapOptions);
			  directionsDisplay = new google.maps.DirectionsRenderer();
			  directionsDisplay.setMap(map);
        }
        google.maps.event.addDomListener(window, 'load', initialize);


        </script>
    </head>
    <body>
       
        <main>
            <section class="where">
                <p>Estás en:</p>
                <h1 id="coordinates"></h1>
            </section>
        </main>

       
<div id="map_canvas" style="width:100%; height:100%"></div>
    </body>
</html>